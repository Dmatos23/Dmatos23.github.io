<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>DMStoreRD - Reporte de Ventas</title>


  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">


  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: "Poppins", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      background: #0b0b0e;
      color: #f5f5f5;
    }

    /* NAVBAR estilo DMStore */
    .navbar {
      width: 100%;
      background: #111;
      border-bottom: 1px solid rgba(241, 196, 15, 0.3);
      padding: 10px 30px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .navbar-logo {
      display: flex;
      align-items: baseline;
      gap: 4px;
      color: #f5f5f5;
    }

    .navbar-logo-main {
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #f1c40f;
      font-size: 1.1rem;
    }

    .navbar-logo-sub {
      font-size: 0.72rem;
      text-transform: uppercase;
      color: #ccc;
    }

    .navbar-menu {
      display: flex;
      gap: 16px;
      font-size: 0.85rem;
    }

    .navbar-menu a {
      text-decoration: none;
      color: #ddd;
      position: relative;
      padding-bottom: 2px;
    }

    .navbar-menu a::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: 0;
      width: 0;
      height: 2px;
      background: #f1c40f;
      transition: width 0.2s ease;
    }

    .navbar-menu a:hover::after {
      width: 100%;
    }

    .navbar-menu a.active {
      color: #f1c40f;
    }

    .navbar-menu a.active::after {
      width: 100%;
    }

    /* CONTENEDOR PRINCIPAL */
    .page-container {
      max-width: 1100px;
      margin: 20px auto;
      padding: 0 16px 24px;
    }

    .app-wrapper {
      width: 100%;
      background: #111219;
      border-radius: 18px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6);
      padding: 24px 28px 30px;
      border: 1px solid rgba(241, 196, 15, 0.18);
    }

    .app-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 22px;
      gap: 16px;
    }

    .app-title {
      font-size: 1.4rem;
      font-weight: 600;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      color: #f1c40f;
    }

    .app-subtitle {
      font-size: 0.85rem;
      color: #c2c2c2;
    }

    .badge-dm {
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(241, 196, 15, 0.7);
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .app-body {
      display: grid;
      grid-template-columns: minmax(0, 320px) minmax(0, 1fr);
      gap: 24px;
    }

    @media (max-width: 900px) {
      .app-body {
        grid-template-columns: 1fr;
      }
    }

    /* Tarjeta de controles (formulario) */
    .card {
      background: radial-gradient(circle at top left, #1f2029, #14141c);
      border-radius: 16px;
      padding: 18px 18px 20px;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    .card-title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 8px;
      color: #f5f5f5;
    }

    .card-subtitle {
      font-size: 0.8rem;
      color: #aaaaaa;
      margin-bottom: 14px;
    }

    .form-group {
      margin-bottom: 12px;
    }

    label {
      display: block;
      font-size: 0.8rem;
      margin-bottom: 4px;
      color: #e4e4e4;
    }

    select,
    input[type="number"] {
      width: 100%;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid #2d2f3a;
      background: #14151d;
      color: #f5f5f5;
      font-size: 0.85rem;
      outline: none;
      transition: border 0.2s ease, box-shadow 0.2s ease;
    }

    select:focus,
    input[type="number"]:focus {
      border-color: #f1c40f;
      box-shadow: 0 0 0 1px rgba(241, 196, 15, 0.5);
    }

    .btn-primary {
      border: none;
      background: linear-gradient(120deg, #f1c40f, #f39c12);
      color: #111;
      font-weight: 600;
      font-size: 0.85rem;
      padding: 9px 16px;
      border-radius: 999px;
      cursor: pointer;
      margin-top: 4px;
      transition: transform 0.1s ease, box-shadow 0.1s ease, filter 0.1s ease;
    }

    .btn-primary:hover {
      filter: brightness(1.05);
      box-shadow: 0 0 14px rgba(241, 196, 15, 0.4);
      transform: translateY(-1px);
    }

    .btn-primary:active {
      transform: translateY(0);
      box-shadow: none;
    }

    .hint {
      font-size: 0.75rem;
      color: #999;
      margin-top: 4px;
    }

    /* Tarjeta del gráfico */
    .chart-card {
      background: radial-gradient(circle at top right, #20212b, #13131b);
      border-radius: 16px;
      padding: 18px;
      border: 1px solid rgba(255, 255, 255, 0.05);
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }

    .chart-title {
      font-size: 0.95rem;
      font-weight: 600;
    }

    .chart-meta {
      font-size: 0.78rem;
      color: #b8b8b8;
      text-align: right;
    }

    .chart-container {
      position: relative;
      width: 100%;
      min-height: 260px;
    }

    /* Vista previa de la data */
    .data-preview {
      margin-top: 6px;
      border-top: 1px solid rgba(255, 255, 255, 0.04);
      padding-top: 8px;
    }

    .data-preview-title {
      font-size: 0.78rem;
      color: #d7d7d7;
      margin-bottom: 4px;
    }

    .data-preview-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.76rem;
      color: #d1d1d1;
    }

    .data-preview-table th,
    .data-preview-table td {
      padding: 4px 6px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.03);
      text-align: left;
    }

    .data-preview-table th {
      color: #f1c40f;
      font-weight: 500;
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="navbar-logo">
      <span class="navbar-logo-main">DMSTORE</span>
      <span class="navbar-logo-sub">Perfumes &amp; Tecnología</span>
    </div>
    <div class="navbar-menu">
     
      <a href="#" class="active">Reportes / Gráficos</a>
    </div>
  </nav>

  <div class="page-container">
    <div class="app-wrapper">
      <header class="app-header">
        <div>
          <div class="app-title">Panel de Ventas - DMStoreRD</div>
          <div class="app-subtitle">
            Página independiente para visualizar ventas por mes con gráficos.
          </div>
        </div>
        <div class="badge-dm">Módulo de Reportes</div>
      </header>

      <main class="app-body">
        <section class="card">
          <h2 class="card-title">Configuración del gráfico</h2>
          <p class="card-subtitle">
            Selecciona el año, tipo de gráfico y rango de meses.
          </p>

          <form id="chartForm">
            <div class="form-group">
              <label for="yearSelect">Año</label>
              <select id="yearSelect" required>
                <option value="2024" selected>2024</option>
                <option value="2025">2025</option>
              </select>
            </div>

            <div class="form-group">
              <label for="chartTypeSelect">Tipo de gráfico</label>
              <select id="chartTypeSelect" required>
                <option value="bar" selected>Barras</option>
                <option value="line">Línea</option>
              </select>
            </div>

            <div class="form-group">
              <label for="startMonth">Mes inicial (1-12)</label>
              <input type="number" id="startMonth" min="1" max="12" value="1" />
            </div>

            <div class="form-group">
              <label for="endMonth">Mes final (1-12)</label>
              <input type="number" id="endMonth" min="1" max="12" value="12" />
            </div>

            <button type="submit" class="btn-primary">Generar gráfico</button>
          </form>

          <p class="hint">
            La data se toma del objeto <strong>salesData</strong> interno (puedes cambiarlo por datos de tu BD).
          </p>
        </section>

        <!-- GRÁFICO -->
        <section class="chart-card">
          <div class="chart-header">
            <div>
              <div class="chart-title" id="chartTitle">Ventas mensuales DMStoreRD</div>
            </div>
            <div class="chart-meta" id="chartMeta">
              Año: 2024 · Gráfico: Barras
            </div>
          </div>

          <div class="chart-container">
            <canvas id="salesChart"></canvas>
          </div>

          <div class="data-preview">
            <div class="data-preview-title">Data utilizada (fuente interna de la app):</div>
            <table class="data-preview-table" id="dataPreviewTable">
              <!-- Se llena por JS -->
            </table>
          </div>
        </section>
      </main>
    </div>
  </div>

  <script>
    // === DATA PROVISTA POR LA APLICACIÓN (ejemplo, luego la puedes reemplazar por la BD) ===
    const salesData = {
      2024: [
        { mes: "Enero", monto: 1200 },
        { mes: "Febrero", monto: 1850 },
        { mes: "Marzo", monto: 1600 },
        { mes: "Abril", monto: 2100 },
        { mes: "Mayo", monto: 1950 },
        { mes: "Junio", monto: 2300 },
        { mes: "Julio", monto: 2500 },
        { mes: "Agosto", monto: 2400 },
        { mes: "Septiembre", monto: 2600 },
        { mes: "Octubre", monto: 2700 },
        { mes: "Noviembre", monto: 3000 },
        { mes: "Diciembre", monto: 3500 },
      ],
      2025: [
        { mes: "Enero", monto: 1500 },
        { mes: "Febrero", monto: 1900 },
        { mes: "Marzo", monto: 2000 },
        { mes: "Abril", monto: 2200 },
        { mes: "Mayo", monto: 2100 },
        { mes: "Junio", monto: 2600 },
        { mes: "Julio", monto: 2800 },
        { mes: "Agosto", monto: 2900 },
        { mes: "Septiembre", monto: 3100 },
        { mes: "Octubre", monto: 3300 },
        { mes: "Noviembre", monto: 3600 },
        { mes: "Diciembre", monto: 4000 },
      ],
    };

    const ctx = document.getElementById("salesChart").getContext("2d");
    let salesChart = null;

    function buildChart(year, chartType, startMonth = 1, endMonth = 12) {
      const yearData = salesData[year] || [];

      const startIndex = Math.max(0, (startMonth || 1) - 1);
      const endIndex = Math.min(12, endMonth || 12);

      const filtered = yearData.slice(startIndex, endIndex);
      const labels = filtered.map((item) => item.mes);
      const values = filtered.map((item) => item.monto);

      if (salesChart) {
        salesChart.destroy();
      }

      salesChart = new Chart(ctx, {
        type: chartType,
        data: {
          labels: labels,
          datasets: [
            {
              label: "Ventas (USD)",
              data: values,
              tension: 0.35,
              borderWidth: 2,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              labels: {
                color: "#f5f5f5",
                font: { family: "Poppins" },
              },
            },
            tooltip: {
              callbacks: {
                label: (ctx) => {
                  return " $" + ctx.parsed.y.toLocaleString("es-DO");
                },
              },
            },
          },
          scales: {
            x: {
              ticks: {
                color: "#e0e0e0",
                font: { family: "Poppins" },
              },
              grid: {
                color: "rgba(255,255,255,0.03)",
              },
            },
            y: {
              ticks: {
                color: "#e0e0e0",
                font: { family: "Poppins" },
                callback: (value) => "$" + value,
              },
              grid: {
                color: "rgba(255,255,255,0.03)",
              },
            },
          },
        },
      });

      const chartTitle = document.getElementById("chartTitle");
      const chartMeta = document.getElementById("chartMeta");
      chartTitle.textContent = `Ventas mensuales DMStoreRD (${year})`;

      if (labels.length > 0) {
        chartMeta.textContent = `Año: ${year} · Gráfico: ${
          chartType === "bar" ? "Barras" : "Línea"
        } · Meses: ${labels[0]} - ${labels[labels.length - 1]}`;
      } else {
        chartMeta.textContent = `Año: ${year} · Gráfico: ${
          chartType === "bar" ? "Barras" : "Línea"
        } · Sin datos para el rango seleccionado`;
      }

      updateDataPreview(filtered);
    }

    function updateDataPreview(filteredData) {
      const table = document.getElementById("dataPreviewTable");
      table.innerHTML = "";

      if (!filteredData.length) {
        table.innerHTML = "<tr><td>No hay datos para el rango seleccionado.</td></tr>";
        return;
      }

      const headerRow = document.createElement("tr");
      headerRow.innerHTML = "<th>Mes</th><th>Ventas (USD)</th>";
      table.appendChild(headerRow);

      filteredData.forEach((item) => {
        const row = document.createElement("tr");
        row.innerHTML = `<td>${item.mes}</td><td>$${item.monto.toLocaleString("es-DO")}</td>`;
        table.appendChild(row);
      });
    }

    document.getElementById("chartForm").addEventListener("submit", function (e) {
      e.preventDefault();

      const year = document.getElementById("yearSelect").value;
      const chartType = document.getElementById("chartTypeSelect").value;
      const startMonth = parseInt(document.getElementById("startMonth").value || "1", 10);
      const endMonth = parseInt(document.getElementById("endMonth").value || "12", 10);

      buildChart(year, chartType, startMonth, endMonth);
    });

    buildChart("2024", "bar", 1, 12);
  </script>
</body>
</html>
